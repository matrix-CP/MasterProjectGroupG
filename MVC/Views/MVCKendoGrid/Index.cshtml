@* @model List<MVC.Models.tblEmployee>

<link rel="stylesheet" href="https://kendo.cdn.telerik.com/2021.2.616/styles/kendo.common.min.css" />
<link rel="stylesheet" href="https://kendo.cdn.telerik.com/2021.2.616/styles/kendo.default.min.css" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://kendo.cdn.telerik.com/2021.2.616/js/kendo.all.min.js"></script>

<div id="grid">

</div>
<script>
    $(document).ready(function(){
        var dataSource = new kendo.data.DataSource({
            transport:{
                read:{
                    url:"https://localhost:7249/mvckendogrid/viewcity",
                    dataType:"json",
                    
                },
                create:{
                    url:"https://localhost:7249/mvckendogrid//Register",
                   dataType:"json",
                    type:"POST"
                },
                update:{
                    url:"https://localhost:7249/mvckendogrid//Edit",
                    dataType:"json",
                    type:"POST"
                },
                destroy:{
                    url:"https://localhost:7249/mvckendogrid//Delete",
                    dataType:"json",
                    type:"POST"
                }
            },
            pageSize:10,
            schema:{
                model:{
                    id: "c_empid",
                    fields:{
                        c_empid:{type: "number", editable: false, nullable:false},
                        c_empname: {type:"string", validation:{required:true}},
                        c_empgender: {type:"string", validation:{required:true}},
                        c_dob: {type:"string", validation:{required:true}},
                        c_shift: {type:"string", validation:{required:true}},
                        c_img: {type:"string", validation:{required:true}},
                        c_depart: {type:"number", validation:{required:true}}
                    }
                }
            }
        });
        $("#grid").kendoGrid({
            dataSource: dataSource,
            columns:[
                {field: "c_empid", title: "emp ID"},
                 {field: "c_empname", title: "emp Name"},
                   {field: "c_empgender", title: "c_empgender"},
                     {field: "c_dob", title: "c_dob"},
                       {field: "c_shift", title: "c_shift"},
                         {field: "c_img", title: "c_img"},
                          {field: "c_depart", title: "c_depart"},
                  {command: ["edit", "destroy"], title: "&nbsp;", width:"200px"}
            ],
            editable: "popup",
            toolbar:["create"],
            pageable: true,
            sortable: true,
            filterable: true,
        });

        dataSource.bind("requestEnd", function(e){
            if(e.type === "create" || e.type === "update" || e.type === "destroy"){
                dataSource.read();
            }
        });
        $("#grid").on("click", ".k-grid-cancel-changes", function(){
            dataSource.cancelChanges();
        });
    });
</script> *@

 @model List<MVC.Models.tblEmployee>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://kendo.cdn.telerik.com/2021.2.616/js/kendo.all.min.js"></script>
<link rel="stylesheet" href="https://kendo.cdn.telerik.com/2021.2.616/styles/kendo.common.min.css" />
<link rel="stylesheet" href="https://kendo.cdn.telerik.com/2021.2.616/styles/kendo.default.min.css" />

<div id="grid"></div>

<script>

    $(document).ready(function(){
        var dataSource = new kendo.data.DataSource({
            transport: {
                read: {
                    url: "https://localhost:7249/mvckendogrid/viewcity",
                    dataType: "json",
                },
                create: {
                    url: "https://localhost:7249/mvckendogrid/Register", // Removed extra forward slash
                    dataType: "json",
                    type: "POST"
                },
                update: {
                    url: "https://localhost:7249/mvckendogrid/Edit",
                    dataType: "json",
                    type: "POST"
                },
                destroy: {
                    url: "https://localhost:7249/mvckendogrid/Delete",
                    dataType: "json",
                    type: "POST"
                }
            },
            pageSize: 10,
            schema: {
                model: {
                    id: "c_empid",
                    fields: {
                        c_empid: {type: "number", editable: false, nullable: false},
                        c_empname: {type: "string", validation: {required: true}},
                        c_empgender: {type: "string", validation: {required: true}},
                        c_dob: {type: "date", validation: {required: true}},
                        c_shift: {type: "string", validation: {required: true}},
                        c_img: {type: "string", validation: {required: true}},
                        c_depart: {type: "number", validation: {required: true}}
                    }
                }
            }
        });

        $("#grid").kendoGrid({
            dataSource: dataSource,
            columns: [
                {field: "c_empid", title: "emp ID"},
                {field: "c_empname", title: "emp Name"},
                {field: "c_empgender", title: "c_empgender" ,editor: genderTypeRadioEditor }, 
                {field: "c_dob", title: "c_dob"  , format: "{0:yyyy-MM-dd}"},
                {field: "c_shift", title: "c_shift" ,  editor: shiftCheckboxEditor},
                {field: "c_img", title: "c_img"},
                {field: "c_depart", title: "c_depart" , editor:deptDropDownEditor},
                {command: ["edit", "destroy"], title: "&nbsp;", width: "200px"}
            ],
            editable: "popup",
            toolbar: ["create"],
            pageable: true,
            sortable: true,
            filterable: true,
        });
         function genderTypeRadioEditor(container, options) {
            $('<input type="radio" name="' + options.field + '" value="Male" required/> Male' +
                '<input type="radio" name="' + options.field + '" value="Female" required/> Female'+
                 '<label  name=" value="Female" required/>' )
            .appendTo(container);
        }
        function shiftCheckboxEditor(container, options) {
                
                var checkboxWrapper = $('<div>').appendTo(container);

                
                checkboxWrapper.kendoCheckBoxGroup({
                    items: [
                        { label: "Day", value: "Day" },
                        { label: "Night", value: "Night" },
                        
                    ]
                });
                var checkboxGroup = checkboxWrapper.data("kendoCheckBoxGroup");
                checkboxGroup.value(options.model.c_shift ? options.model.c_shift.split(",") : []);
                checkboxGroup.bind("change", function (e) {
                    options.model.set("c_shift", e.sender.value().join(","));
                });
            }

             function deptDropDownEditor(container, options) {
            $('<input required data-text-field="c_depname" data-value-field="c_depid" data-bind="value:' + options.field + '"/>')
                .appendTo(container)
                .kendoDropDownList({
                    autoBind: false,
                    dataSource: {
                        transport: {
                            read: {
                                url: "https://localhost:7249/mvckendogrid/viewdept",
                                dataType: "json"
                            }
                        }
                    }
                });
        }

        dataSource.bind("requestEnd", function(e){
            if(e.type === "create" || e.type === "update" || e.type === "destroy"){
                dataSource.read();
            }
        });
        $("#grid").on("click", ".k-grid-cancel-changes", function(){
            dataSource.cancelChanges();
        });
    });


</script>

